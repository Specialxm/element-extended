on:
  # ğŸ“¦ ç›‘å¬ push æ“ä½œ
  push:
    branches:
      - main # âœ… åªç›‘å¬ main åˆ†æ”¯

permissions:
  contents: write # âœï¸ å…è®¸å†™å…¥ gh-pages åˆ†æ”¯

jobs:
  # ğŸ› ï¸ å®šä¹‰æ„å»ºä»»åŠ¡
  build:
    runs-on: ubuntu-latest # ğŸ’» ä½¿ç”¨æœ€æ–°ç‰ˆ Ubuntu ç¯å¢ƒ
    steps:
      - name: ğŸ“¥ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: ğŸ”§ è®¾ç½® Node.js ç¯å¢ƒ
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: ğŸ§© å®‰è£… pnpm
        uses: pnpm/action-setup@v3
        with:
          version: 8 # âœ… ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬ pnpmï¼ˆæ ¹æ®ä½ çš„é¡¹ç›®ç‰ˆæœ¬è°ƒæ•´ï¼‰

      - name: ğŸ“¦ å®‰è£…ä¾èµ–å¹¶æ‰“åŒ…é¡¹ç›®
        run: |
          pnpm i pnpm@latest -g # ç¡®ä¿ä½¿ç”¨æœ€æ–° pnpm
          pnpm install
          pnpm run build:admin

      - name: ğŸš€ éƒ¨ç½²åˆ° GitHub Pages
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages # ğŸŒ¿ éƒ¨ç½²ç›®æ ‡åˆ†æ”¯
          folder: apps/web-admin/dist # ğŸ“ æ‰“åŒ…äº§ç‰©ç›®å½•
